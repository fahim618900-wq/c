<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨ ছবি প্রসেসিং টুল</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --gold: #FFD700;
            --gold-light: #FFF8E1;
            --gold-dark: #FFC107;
            --gold-gradient: linear-gradient(135deg, #FFD700 0%, #FFEC8B 100%);
            --white: #ffffff;
            --light-bg: #fafafa;
            --light-border: #f0f0f0;
            --text: #333333;
            --text-light: #666666;
            --success: #4CAF50;
            --info: #2196F3;
            --shadow: rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Noto Sans Bengali', sans-serif;
            background: var(--light-bg);
            min-height: 100vh;
            padding: 20px;
            color: var(--text);
            line-height: 1.5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: var(--white);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 4px 12px var(--shadow);
            border: 1px solid var(--light-border);
        }

        .logo {
            font-size: 48px;
            color: var(--gold-dark);
            margin-bottom: 15px;
        }

        .title {
            color: var(--text);
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            color: var(--text-light);
            font-size: 16px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
        }

        /* Sidebar */
        .sidebar {
            background: var(--white);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 12px var(--shadow);
            border: 1px solid var(--light-border);
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px 20px;
            border-radius: 12px;
            border: 2px solid var(--light-border);
            background: var(--white);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            border-color: var(--gold);
            background: var(--gold-light);
            transform: translateY(-2px);
        }

        .action-btn.active {
            border-color: var(--gold);
            background: var(--gold-gradient);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.15);
        }

        .action-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--gold-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--gold-dark);
        }

        .action-btn.active .action-icon {
            background: var(--white);
        }

        .action-info {
            flex: 1;
            text-align: left;
        }

        .action-label {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 3px;
        }

        .action-desc {
            font-size: 13px;
            color: var(--text-light);
        }

        /* Content Area */
        .content-area {
            background: var(--white);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px var(--shadow);
            border: 1px solid var(--light-border);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--gold-dark);
        }

        /* Upload Area */
        .upload-area {
            border: 3px dashed var(--gold);
            border-radius: 12px;
            padding: 50px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--gold-light);
            margin-bottom: 25px;
        }

        .upload-area:hover {
            background: var(--gold-light);
            border-color: var(--gold-dark);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--gold-dark);
            margin-bottom: 20px;
        }

        .upload-text h3 {
            font-size: 20px;
            color: var(--text);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .upload-text p {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        input[type="file"] {
            display: none;
        }

        /* Files Preview */
        .files-preview {
            display: none;
        }

        .files-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-border);
        }

        .files-count {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-btn {
            padding: 8px 16px;
            background: var(--gold-light);
            color: var(--text);
            border: 2px solid var(--gold);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .clear-btn:hover {
            background: var(--gold);
        }

        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .file-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow);
            border: 1px solid var(--light-border);
            transition: all 0.3s;
            position: relative;
        }

        .file-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .file-preview {
            width: 100%;
            height: 120px;
            object-fit: cover;
            display: block;
            cursor: pointer;
        }

        .file-info {
            padding: 12px;
            text-align: center;
        }

        .file-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 5px;
        }

        .file-size {
            font-size: 11px;
            color: var(--text-light);
        }

        .remove-file {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--text);
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .file-card:hover .remove-file {
            opacity: 1;
        }

        .process-btn {
            width: 100%;
            padding: 18px;
            margin-top: 25px;
            border-radius: 12px;
            background: var(--gold-gradient);
            color: var(--text);
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .process-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 215, 0, 0.2);
        }

        .process-btn:disabled {
            background: #e0e0e0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Processing */
        .processing-section {
            display: none;
        }

        .processing-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .processing-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 10px;
        }

        .processing-desc {
            font-size: 15px;
            color: var(--text-light);
        }

        .progress-container {
            background: var(--light-bg);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-text {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .progress-percent {
            font-size: 18px;
            font-weight: 700;
            color: var(--gold-dark);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--light-border);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gold-gradient);
            width: 0%;
            transition: width 0.3s ease;
        }

        .current-processing {
            text-align: center;
            padding: 15px;
            background: var(--gold-light);
            border-radius: 10px;
            margin-top: 20px;
            font-size: 14px;
            color: var(--text);
        }

        .current-file {
            font-weight: 600;
            color: var(--gold-dark);
        }

        /* Background Options */
        .background-options {
            display: none;
            background: var(--light-bg);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .background-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .background-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .bg-option {
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--light-border);
        }

        .bg-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .bg-option.active {
            border-color: var(--gold);
            background: var(--gold-light);
        }

        .bg-color {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 10px;
            border: 3px solid var(--white);
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .bg-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
        }

        .custom-bg-upload {
            margin-top: 20px;
            padding: 20px;
            background: var(--white);
            border-radius: 10px;
            border: 2px dashed var(--light-border);
            text-align: center;
        }

        .custom-bg-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 10px;
        }

        .custom-bg-desc {
            font-size: 13px;
            color: var(--text-light);
            margin-bottom: 15px;
        }

        .custom-bg-preview {
            width: 100%;
            height: 150px;
            border-radius: 8px;
            object-fit: cover;
            display: none;
            margin-bottom: 15px;
        }

        .remove-bg-btn {
            display: none;
            margin-top: 10px;
            padding: 8px 16px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Results */
        .results-section {
            display: none;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .success-icon {
            font-size: 56px;
            color: var(--gold-dark);
            margin-bottom: 15px;
        }

        .result-title {
            font-size: 28px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 10px;
        }

        .result-desc {
            font-size: 16px;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        /* Links Results */
        .links-results {
            background: var(--light-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .links-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .links-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .copy-all-btn {
            padding: 10px 20px;
            background: var(--gold-light);
            color: var(--text);
            border: 2px solid var(--gold);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .copy-all-btn:hover {
            background: var(--gold);
        }

        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            max-height: 500px;
            overflow-y: auto;
            padding: 10px;
        }

        .link-card {
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px var(--shadow);
            border: 1px solid var(--light-border);
        }

        .link-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .link-number {
            width: 30px;
            height: 30px;
            background: var(--gold-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--gold-dark);
        }

        .link-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid var(--light-border);
        }

        .link-filename {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .link-box {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            font-size: 13px;
            color: var(--text);
            font-family: 'Courier New', monospace;
            word-break: break-all;
            margin-bottom: 12px;
            border: 1px solid var(--light-border);
        }

        .link-actions {
            display: flex;
            gap: 8px;
        }

        .link-btn {
            flex: 1;
            padding: 10px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .copy-btn {
            background: var(--gold-light);
            color: var(--text);
        }

        .copy-btn:hover {
            background: var(--gold);
        }

        /* Images Results */
        .images-results {
            background: var(--light-bg);
            border-radius: 12px;
            padding: 25px;
        }

        .images-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .images-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
            padding: 10px;
        }

        .image-card {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow);
            border: 1px solid var(--light-border);
            transition: all 0.3s;
        }

        .image-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .image-preview {
            width: 100%;
            height: 140px;
            object-fit: cover;
            display: block;
            cursor: pointer;
        }

        .image-preview:hover {
            opacity: 0.9;
        }

        .image-info {
            padding: 12px;
            text-align: center;
        }

        .image-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .image-actions {
            display: flex;
            gap: 8px;
        }

        .image-btn {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .download-btn {
            background: var(--gold-light);
            color: var(--text);
        }

        .download-btn:hover {
            background: var(--gold);
        }

        .reset-btn {
            width: 100%;
            padding: 18px;
            margin-top: 25px;
            border-radius: 12px;
            background: var(--gold-gradient);
            color: var(--text);
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 215, 0, 0.2);
        }

        /* Modal for Image Preview */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: var(--white);
            border-radius: 16px;
            padding: 30px;
            max-width: 90%;
            max-height: 90%;
            position: relative;
            animation: slideUp 0.3s;
        }

        .modal-image {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 8px;
            display: block;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--gold);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: var(--gold-dark);
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: var(--gold-light);
            color: var(--text);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px var(--shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            border: 2px solid var(--gold);
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
            }
            
            .content-area {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                padding: 25px 20px;
            }
            
            .title {
                font-size: 28px;
            }
            
            .content-area {
                padding: 20px;
            }
            
            .files-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
            
            .links-grid {
                grid-template-columns: 1fr;
            }
            
            .images-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .action-btn {
                padding: 15px;
            }
            
            .background-options-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 15px;
            }
            
            .logo {
                font-size: 40px;
            }
            
            .title {
                font-size: 24px;
            }
            
            .files-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .images-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-buttons {
                gap: 10px;
            }
            
            .background-options-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                ✨
            </div>
            <h1 class="title">ছবি প্রসেসিং টুল</h1>
            <p class="subtitle">একসাথে অনেক ছবির লিঙ্ক তৈরি বা ব্যাকগ্রাউন্ড রিমুভ</p>
        </div>

        <div class="main-content">
            <!-- Sidebar - Action Selection -->
            <div class="sidebar">
                <div class="action-buttons">
                    <div class="action-btn" id="linkAction" onclick="selectAction('link')">
                        <div class="action-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="action-info">
                            <div class="action-label">লিঙ্ক তৈরি করুন</div>
                            <div class="action-desc">পাবলিক শেয়ারিং লিঙ্ক</div>
                        </div>
                    </div>
                    
                    <div class="action-btn" id="bgRemoveAction" onclick="selectAction('bgremove')">
                        <div class="action-icon">
                            <i class="fas fa-magic"></i>
                        </div>
                        <div class="action-info">
                            <div class="action-label">ব্যাকগ্রাউন্ড রিমুভ করুন</div>
                            <div class="action-desc">AI প্রযুক্তি ব্যবহার</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Upload Section -->
                <div class="upload-section" id="uploadSection">
                    <div class="section-title">
                        <i class="fas fa-cloud-upload-alt"></i>
                        ছবি সিলেক্ট করুন
                    </div>
                    
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-images"></i>
                        </div>
                        <div class="upload-text">
                            <h3>একসাথে অনেক ছবি আপলোড করুন</h3>
                            <p>ক্লিক করুন অথবা ছবিগুলো ড্র্যাগ করুন</p>
                            <p>সর্বোচ্চ ২০টি ছবি • প্রতিটি ১০MB • JPG, PNG, WEBP</p>
                        </div>
                        <input type="file" id="imageInput" accept="image/*" multiple>
                    </div>

                    <div class="files-preview" id="filesPreview">
                        <div class="files-header">
                            <div class="files-count">
                                <i class="fas fa-images"></i>
                                <span id="filesCount"> ছবি</span>
                            </div>
                            <button class="clear-btn" onclick="clearAllFiles()">
                                <i class="fas fa-trash"></i> মুছুন
                            </button>
                        </div>
                        <div class="files-grid" id="filesGrid"></div>
                    </div>

                    <!-- Background Options -->
                    <div class="background-options" id="backgroundOptions">
                        <div class="background-title">
                            <i class="fas fa-palette"></i>
                            নতুন ব্যাকগ্রাউন্ড সিলেক্ট করুন
                        </div>
                        
                        <div class="background-options-grid" id="backgroundOptionsGrid">
                            <!-- Background options will be generated here -->
                        </div>
                        
                        <div class="custom-bg-upload">
                            <div class="custom-bg-label">নিজের ছবি দিয়ে ব্যাকগ্রাউন্ড বসান</div>
                            <div class="custom-bg-desc">আপনার নিজের ছবি আপলোড করুন ব্যাকগ্রাউন্ড হিসেবে</div>
                            <img class="custom-bg-preview" id="customBgPreview" src="" alt="Custom Background">
                            <button class="clear-btn" onclick="document.getElementById('customBgInput').click()">
                                <i class="fas fa-upload"></i> ছবি আপলোড
                            </button>
                            <input type="file" id="customBgInput" accept="image/*" style="display: none;">
                            <button class="remove-bg-btn" id="removeCustomBg" onclick="removeCustomBackground()">
                                <i class="fas fa-trash"></i> ছবি রিমুভ
                            </button>
                        </div>
                    </div>

                    <button class="process-btn" id="processBtn" onclick="startProcessing()" disabled>
                        <i class="fas fa-play"></i> প্রসেস শুরু করুন
                    </button>
                </div>

                <!-- Processing Section -->
                <div class="processing-section" id="processingSection">
                    <div class="processing-header">
                        <div class="processing-title" id="processingTitle">ছবি প্রসেস করা হচ্ছে...</div>
                        <div class="processing-desc" id="processingDesc">দয়া করে অপেক্ষা করুন</div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-info">
                            <div class="progress-text" id="progressText"> ছবি প্রসেস করা হয়েছে</div>
                            <div class="progress-percent" id="progressPercent">০%</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>

                    <div class="current-processing">
                        বর্তমানে: <span class="current-file" id="currentFileName">কোনো ছবি নেই</span>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="results-section" id="resultsSection">
                    <div class="results-header">
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="result-title" id="resultTitle">প্রসেসিং সম্পূর্ণ</div>
                        <div class="result-desc" id="resultDesc"></div>
                    </div>

                    <!-- Links Results -->
                    <div class="links-results" id="linksResults">
                        <div class="links-header">
                            <div class="links-title">
                                <i class="fas fa-link"></i>
                                <span>সব ছবির লিঙ্ক</span>
                            </div>
                            <button class="copy-all-btn" onclick="copyAllLinks()">
                                <i class="fas fa-copy"></i>লিঙ্ক কপি
                            </button>
                        </div>
                        <div class="links-grid" id="linksGrid"></div>
                    </div>

                    <!-- Images Results -->
                    <div class="images-results" id="imagesResults">
                        <div class="images-header">
                            <div class="images-title">
                                <i class="fas fa-image"></i>
                                <span>প্রসেস করা ছবি</span>
                            </div>
                        </div>
                        <div class="images-grid" id="imagesGrid"></div>
                    </div>

                    <button class="reset-btn" onclick="resetTool()">
                        <i class="fas fa-redo"></i> নতুন ছবি প্রসেস করুন
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div class="modal-overlay" id="imageModal">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </div>
            <img class="modal-image" id="modalImage" src="" alt="Preview">
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText"></span>
    </div>

    <script>
        // API Keys
        const IMGBB_API_KEY = "c1f29465e1de3534d7069b0e1a663aee";
        const REMOVE_BG_API_KEY = "7ZzNjzXi6JhF69z6c3Qrj9tD";
        
        // DOM Elements
        const uploadSection = document.getElementById('uploadSection');
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');
        const filesPreview = document.getElementById('filesPreview');
        const filesCount = document.getElementById('filesCount');
        const filesGrid = document.getElementById('filesGrid');
        const processBtn = document.getElementById('processBtn');
        const backgroundOptions = document.getElementById('backgroundOptions');
        const backgroundOptionsGrid = document.getElementById('backgroundOptionsGrid');
        const customBgInput = document.getElementById('customBgInput');
        const customBgPreview = document.getElementById('customBgPreview');
        const removeCustomBg = document.getElementById('removeCustomBg');
        const processingSection = document.getElementById('processingSection');
        const processingTitle = document.getElementById('processingTitle');
        const processingDesc = document.getElementById('processingDesc');
        const progressText = document.getElementById('progressText');
        const progressPercent = document.getElementById('progressPercent');
        const progressFill = document.getElementById('progressFill');
        const currentFileName = document.getElementById('currentFileName');
        const resultsSection = document.getElementById('resultsSection');
        const resultTitle = document.getElementById('resultTitle');
        const resultDesc = document.getElementById('resultDesc');
        const linksResults = document.getElementById('linksResults');
        const linksGrid = document.getElementById('linksGrid');
        const imagesResults = document.getElementById('imagesResults');
        const imagesGrid = document.getElementById('imagesGrid');
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        // State
        let selectedAction = null;
        let selectedFiles = [];
        let selectedBackground = null;
        let customBackgroundImage = null;
        const MAX_FILES = 20;
        let processedResults = [];
        
        // Background color options
        const backgroundOptionsList = [
            { name: 'সাদা', color: '#FFFFFF', value: 'white' },
            { name: 'কালো', color: '#000000', value: 'black' },
            { name: 'নীল', color: '#2196F3', value: 'blue' },
            { name: 'সবুজ', color: '#4CAF50', value: 'green' },
            { name: 'লাল', color: '#F44336', value: 'red' },
            { name: 'হলুদ', color: '#FFEB3B', value: 'yellow' },
            { name: 'ধূসর', color: '#9E9E9E', value: 'gray' },
            { name: 'গোলাপি', color: '#E91E63', value: 'pink' }
        ];
        
        // Initialize background options
        function initializeBackgroundOptions() {
            backgroundOptionsGrid.innerHTML = '';
            
            backgroundOptionsList.forEach(bg => {
                const bgOption = document.createElement('div');
                bgOption.className = 'bg-option';
                bgOption.setAttribute('data-color', bg.color);
                bgOption.setAttribute('data-value', bg.value);
                bgOption.onclick = () => selectBackground(bg.value, bg.color);
                
                bgOption.innerHTML = `
                    <div class="bg-color" style="background-color: ${bg.color};"></div>
                    <div class="bg-label">${bg.name}</div>
                `;
                
                backgroundOptionsGrid.appendChild(bgOption);
            });
        }
        
        // Action Selection
        function selectAction(action) {
            if (selectedAction === action) return;
            
            selectedAction = action;
            
            // Update UI
            document.getElementById('linkAction').classList.remove('active');
            document.getElementById('bgRemoveAction').classList.remove('active');
            document.getElementById(action + 'Action').classList.add('active');
            
            // Show/hide background options
            if (action === 'bgremove') {
                backgroundOptions.style.display = 'block';
                initializeBackgroundOptions();
            } else {
                backgroundOptions.style.display = 'none';
                selectedBackground = null;
            }
            
            // Show upload section if not visible
            if (uploadSection.style.display !== 'block') {
                uploadSection.style.display = 'block';
                processingSection.style.display = 'none';
                resultsSection.style.display = 'none';
            }
            
            showNotification(action === 'link' ? 'লিঙ্ক তৈরি সিলেক্ট করা হয়েছে' : 'ব্যাকগ্রাউন্ড রিমুভ সিলেক্ট করা হয়েছে', 'info');
        }
        
        // Background selection
        function selectBackground(value, color) {
            selectedBackground = value;
            customBackgroundImage = null;
            customBgPreview.style.display = 'none';
            removeCustomBg.style.display = 'none';
            
            // Update UI
            document.querySelectorAll('.bg-option').forEach(opt => {
                opt.classList.remove('active');
            });
            
            event.currentTarget.classList.add('active');
            
            showNotification(`${value} ব্যাকগ্রাউন্ড সিলেক্ট করা হয়েছে`, 'info');
        }
        
        // Custom background upload
        customBgInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const file = this.files[0];
                
                // Validate file
                if (!file.type.startsWith('image/')) {
                    showNotification('শুধুমাত্র ছবি ফাইল আপলোড করুন', 'warning');
                    return;
                }
                
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('ছবির সাইজ ৫MB এর বেশি হতে পারবে না', 'warning');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    customBackgroundImage = e.target.result;
                    customBgPreview.src = customBackgroundImage;
                    customBgPreview.style.display = 'block';
                    removeCustomBg.style.display = 'inline-block';
                    
                    // Select custom background
                    selectedBackground = 'custom';
                    
                    // Remove selection from color options
                    document.querySelectorAll('.bg-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    
                    showNotification('কাস্টম ব্যাকগ্রাউন্ড সিলেক্ট করা হয়েছে', 'success');
                };
                reader.readAsDataURL(file);
            }
        });
        
        function removeCustomBackground() {
            customBackgroundImage = null;
            customBgPreview.src = '';
            customBgPreview.style.display = 'none';
            removeCustomBg.style.display = 'none';
            customBgInput.value = '';
            selectedBackground = null;
            
            showNotification('কাস্টম ব্যাকগ্রাউন্ড রিমুভ করা হয়েছে', 'info');
        }
        
        // File Upload
        uploadArea.addEventListener('click', () => imageInput.click());
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--gold-dark)';
            uploadArea.style.background = 'var(--gold-light)';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = 'var(--gold)';
            uploadArea.style.background = 'var(--gold-light)';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--gold)';
            uploadArea.style.background = 'var(--gold-light)';
            
            if (e.dataTransfer.files.length) {
                handleFiles(e.dataTransfer.files);
            }
        });
        
        imageInput.addEventListener('change', () => {
            if (imageInput.files.length) {
                handleFiles(imageInput.files);
            }
        });
        
        function handleFiles(files) {
            const newFiles = Array.from(files).slice(0, MAX_FILES - selectedFiles.length);
            
            if (newFiles.length === 0) {
                showNotification(`সর্বোচ্চ ${MAX_FILES}টি ছবি সিলেক্ট করা যাবে`, 'warning');
                return;
            }
            
            let validFiles = 0;
            
            newFiles.forEach(file => {
                // Validation
                if (!file.type.startsWith('image/')) {
                    showNotification(`${file.name} ছবি ফাইল নয়`, 'warning');
                    return;
                }
                
                if (file.size > 10 * 1024 * 1024) {
                    showNotification(`${file.name} ১০MB এর বেশি`, 'warning');
                    return;
                }
                
                // Check duplicate
                if (selectedFiles.some(f => f.name === file.name && f.size === file.size)) {
                    return;
                }
                
                // Create preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    selectedFiles.push({
                        file: file,
                        preview: e.target.result,
                        id: Date.now() + Math.random()
                    });
                    
                    updateFilesDisplay();
                    processBtn.disabled = false;
                    
                    if (selectedFiles.length === 1) {
                        showNotification('ছবি সিলেক্ট করা হয়েছে', 'success');
                    } else {
                        filesCount.textContent = `${selectedFiles.length}টি ছবি`;
                    }
                };
                reader.readAsDataURL(file);
                validFiles++;
            });
        }
        
        function updateFilesDisplay() {
            filesPreview.style.display = 'block';
            filesCount.textContent = `${selectedFiles.length}টি ছবি`;
            filesGrid.innerHTML = '';
            
            selectedFiles.forEach((fileObj, index) => {
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                fileCard.innerHTML = `
                    <img class="file-preview" src="${fileObj.preview}" alt="${fileObj.file.name}" onclick="openModal('${fileObj.preview}')">
                    <div class="file-info">
                        <div class="file-name">${fileObj.file.name}</div>
                        <div class="file-size">${formatFileSize(fileObj.file.size)}</div>
                    </div>
                    <div class="remove-file" onclick="removeFile(${index})">
                        <i class="fas fa-times"></i>
                    </div>
                `;
                filesGrid.appendChild(fileCard);
            });
        }
        
        function removeFile(index) {
            selectedFiles.splice(index, 1);
            updateFilesDisplay();
            
            if (selectedFiles.length === 0) {
                filesPreview.style.display = 'none';
                processBtn.disabled = true;
            }
        }
        
        function clearAllFiles() {
            selectedFiles = [];
            filesPreview.style.display = 'none';
            processBtn.disabled = true;
            imageInput.value = '';
            showNotification('সব ছবি মুছে ফেলা হয়েছে', 'info');
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' বাইট';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }
        
        // Processing
        async function startProcessing() {
            if (!selectedAction || selectedFiles.length === 0) return;
            
            // For background removal, check if background is selected
            if (selectedAction === 'bgremove' && !selectedBackground) {
                showNotification('ব্যাকগ্রাউন্ড সিলেক্ট করুন', 'warning');
                return;
            }
            
            uploadSection.style.display = 'none';
            processingSection.style.display = 'block';
            
            if (selectedAction === 'link') {
                await processLinks();
            } else {
                await processBackgroundRemovals();
            }
        }
        
        async function processLinks() {
            processingTitle.textContent = 'লিঙ্ক তৈরি করা হচ্ছে...';
            processingDesc.textContent = 'ছবিগুলো আপলোড হচ্ছে';
            
            processedResults = [];
            let completed = 0;
            let successful = 0;
            
            for (let i = 0; i < selectedFiles.length; i++) {
                const fileObj = selectedFiles[i];
                
                // Update UI
                currentFileName.textContent = fileObj.file.name;
                const percent = Math.round(((i + 1) / selectedFiles.length) * 100);
                progressText.textContent = `${i + 1}/${selectedFiles.length} ছবি`;
                progressPercent.textContent = `${percent}%`;
                progressFill.style.width = `${percent}%`;
                
                try {
                    const formData = new FormData();
                    formData.append('image', fileObj.file);
                    
                    const response = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        processedResults.push({
                            name: fileObj.file.name,
                            type: 'link',
                            url: data.data.url,
                            preview: fileObj.preview
                        });
                        successful++;
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
                
                completed++;
            }
            
            showLinksResults(successful, selectedFiles.length);
        }
        
        async function processBackgroundRemovals() {
            processingTitle.textContent = 'ব্যাকগ্রাউন্ড রিমুভ করা হচ্ছে...';
            processingDesc.textContent = 'AI প্রযুক্তি ব্যবহার করে';
            
            processedResults = [];
            let completed = 0;
            let successful = 0;
            
            for (let i = 0; i < selectedFiles.length; i++) {
                const fileObj = selectedFiles[i];
                
                // Update UI
                currentFileName.textContent = fileObj.file.name;
                const percent = Math.round(((i + 1) / selectedFiles.length) * 100);
                progressText.textContent = `${i + 1}/${selectedFiles.length} ছবি`;
                progressPercent.textContent = `${percent}%`;
                progressFill.style.width = `${percent}%`;
                
                try {
                    // First, remove background
                    const formData = new FormData();
                    formData.append('image_file', fileObj.file);
                    formData.append('size', 'auto');
                    formData.append('format', 'png');
                    
                    const response = await fetch('https://api.remove.bg/v1.0/removebg', {
                        method: 'POST',
                        headers: {
                            'X-Api-Key': REMOVE_BG_API_KEY
                        },
                        body: formData
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = URL.createObjectURL(blob);
                        
                        // If background is selected (not just remove), we would apply it here
                        // In a real implementation, you would use a canvas to apply the background
                        // For demo purposes, we'll just use the transparent image
                        
                        processedResults.push({
                            name: fileObj.file.name,
                            type: 'image',
                            url: url,
                            blob: blob,
                            preview: fileObj.preview,
                            background: selectedBackground,
                            customBg: customBackgroundImage
                        });
                        successful++;
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
                
                completed++;
            }
            
            showImagesResults(successful, selectedFiles.length);
        }
        
        // Results Display
        function showLinksResults(successful, total) {
            processingSection.style.display = 'none';
            resultsSection.style.display = 'block';
            
            resultTitle.textContent = 'লিঙ্ক তৈরি সম্পূর্ণ';
            resultDesc.textContent = `${successful}/${total}টি ছবির লিঙ্ক তৈরি হয়েছে`;
            
            // Show links results
            linksResults.style.display = 'block';
            imagesResults.style.display = 'none';
            
            // Populate links
            linksGrid.innerHTML = '';
            processedResults.forEach((result, index) => {
                const linkCard = document.createElement('div');
                linkCard.className = 'link-card';
                linkCard.innerHTML = `
                    <div class="link-header">
                        <div class="link-number">${index + 1}</div>
                        <img class="link-preview" src="${result.preview}" alt="${result.name}" onclick="openModal('${result.preview}')">
                        <div class="link-filename">${result.name}</div>
                    </div>
                    <div class="link-box">${result.url}</div>
                    <div class="link-actions">
                        <button class="link-btn copy-btn" onclick="copyLink('${result.url}')">
                            <i class="fas fa-copy"></i> লিঙ্ক কপি
                        </button>
                    </div>
                `;
                linksGrid.appendChild(linkCard);
            });
        }
        
        function showImagesResults(successful, total) {
            processingSection.style.display = 'none';
            resultsSection.style.display = 'block';
            
            resultTitle.textContent = 'ব্যাকগ্রাউন্ড রিমুভ সম্পূর্ণ';
            resultDesc.textContent = `${successful}/${total}টি ছবির ব্যাকগ্রাউন্ড রিমুভ হয়েছে`;
            
            // Show images results
            linksResults.style.display = 'none';
            imagesResults.style.display = 'block';
            
            // Populate images
            imagesGrid.innerHTML = '';
            processedResults.forEach((result, index) => {
                const imageCard = document.createElement('div');
                imageCard.className = 'image-card';
                
                // Create a small preview image (in real implementation, this would be the processed image)
                const previewUrl = result.url || result.preview;
                
                imageCard.innerHTML = `
                    <img class="image-preview" src="${previewUrl}" alt="${result.name}" onclick="openModal('${previewUrl}')">
                    <div class="image-info">
                        <div class="image-name">${result.name}</div>
                        <div class="image-actions">
                            <button class="image-btn download-btn" onclick="downloadImage(${index})">
                                <i class="fas fa-download"></i> ডাউনলোড
                            </button>
                        </div>
                    </div>
                `;
                imagesGrid.appendChild(imageCard);
            });
        }
        
        // Actions
        function copyLink(link) {
            navigator.clipboard.writeText(link).then(() => {
                showNotification('লিঙ্ক কপি করা হয়েছে', 'success');
            });
        }
        
        function copyAllLinks() {
            const allLinks = processedResults.map(r => r.url).join('\n\n');
            navigator.clipboard.writeText(allLinks).then(() => {
                showNotification('সব লিঙ্ক কপি করা হয়েছে', 'success');
            });
        }
        
        function downloadImage(index) {
            const result = processedResults[index];
            const link = document.createElement('a');
            link.href = result.url;
            link.download = `processed-${result.name.split('.')[0]}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showNotification('ছবি ডাউনলোড শুরু হয়েছে', 'success');
        }
        
        // Modal Functions
        function openModal(imageUrl) {
            modalImage.src = imageUrl;
            imageModal.style.display = 'flex';
        }
        
        function closeModal() {
            imageModal.style.display = 'none';
        }
        
        // Close modal on overlay click
        imageModal.addEventListener('click', function(e) {
            if (e.target === imageModal) {
                closeModal();
            }
        });
        
        // Reset Tool
        function resetTool() {
            // Clear state
            selectedAction = null;
            selectedFiles = [];
            selectedBackground = null;
            customBackgroundImage = null;
            processedResults = [];
            
            // Reset UI
            document.getElementById('linkAction').classList.remove('active');
            document.getElementById('bgRemoveAction').classList.remove('active');
            document.querySelectorAll('.bg-option').forEach(opt => {
                opt.classList.remove('active');
            });
            
            uploadSection.style.display = 'block';
            processingSection.style.display = 'none';
            resultsSection.style.display = 'none';
            backgroundOptions.style.display = 'none';
            filesPreview.style.display = 'none';
            processBtn.disabled = true;
            imageInput.value = '';
            customBgInput.value = '';
            customBgPreview.src = '';
            customBgPreview.style.display = 'none';
            removeCustomBg.style.display = 'none';
            
            // Cleanup object URLs
            processedResults.forEach(r => {
                if (r.type === 'image' && r.url) {
                    URL.revokeObjectURL(r.url);
                }
            });
            
            showNotification('নতুন ছবি প্রসেস করতে প্রস্তুত', 'info');
        }
        
        // Notification
        function showNotification(message, type) {
            notificationText.textContent = message;
            notification.className = 'notification show';
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Initialize
        window.addEventListener('load', () => {
            showNotification('ছবি প্রসেসিং টুলে স্বাগতম! একটি অ্যাকশন সিলেক্ট করুন।', 'info');
        });
    </script>
</body>
</html>
