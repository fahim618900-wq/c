<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ö‡¶®‡ßá‡¶ï ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶´‡ßç‡¶∞‡ßÄ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* =========================
   CSS VARIABLES (THEME)
========================= */
:root {
    --primary: #4361ee;
    --primary-light: #eef2ff;
    --secondary: #3a0ca3;
    --success: #4cc9f0;

    --light-bg: #f8f9fa;
    --white: #ffffff;

    --text: #333333;
    --text-light: #666666;

    --border: #e1e5eb;
    --shadow: rgba(0, 0, 0, 0.08);
}

/* =========================
   GLOBAL RESET
========================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* =========================
   BODY
========================= */
body {
    font-family: 'Segoe UI', 'Noto Sans Bengali', sans-serif;
    background: var(--light-bg);
    color: var(--text);
    line-height: 1.6;
    min-height: 100vh;
    padding: 20px;
}

/* =========================
   LAYOUT
========================= */
.container {
    max-width: 900px;
    margin: 0 auto;
}

/* =========================
   HEADER
========================= */
.header {
    text-align: center;
    padding: 30px 20px;
    margin-bottom: 30px;
}

.logo {
    font-size: 48px;
    color: var(--primary);
    margin-bottom: 15px;
}

.title {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 10px;
}

.subtitle {
    font-size: 16px;
    color: var(--text-light);
    max-width: 600px;
    margin: 0 auto;
}

/* =========================
   CARD
========================= */
.main-card {
    background: var(--white);
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 8px 30px var(--shadow);
    margin-bottom: 20px;
}

/* =========================
   SECTION TITLE
========================= */
.section-title {
    display: flex;
    align-items: center;
    gap: 10px;

    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;

    padding-bottom: 15px;
    border-bottom: 2px solid var(--primary-light);
}

.section-title i {
    color: var(--primary);
}

/* =========================
   ACTION BUTTONS
========================= */
.action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 30px;
}

@media (max-width: 600px) {
    .action-buttons {
        grid-template-columns: 1fr;
    }
}

.action-btn {
    padding: 20px;
    border-radius: 12px;
    border: 2px solid var(--border);
    background: var(--white);
    text-align: center;
    cursor: pointer;
    transition: all 0.25s ease;
}

.action-btn:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px var(--shadow);
}

.action-btn.active {
    background: var(--primary-light);
    border-color: var(--primary);
}

.action-icon {
    font-size: 28px;
    color: var(--primary);
    margin-bottom: 10px;
}

.action-label {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 5px;
}

.action-description {
    font-size: 13px;
    color: var(--text-light);
}

/* =========================
   ANIMATION
========================= */
@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.upload-section,
.processing-container,
.results-container {
    animation: slideUp 0.3s ease;
}
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                üì∑‚ú®
            </div>
            <h1 class="title">‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç</h1>
            <p class="subtitle">‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶∞‡¶æ‡¶® -  ‡¶Ö‡¶®‡ßá‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶õ‡¶¨‡¶ø</p>
        </div>

        <div class="main-card">
            <!-- Step 1: Action Selection -->
            <div class="section-title">
                <i class="fas fa-mouse-pointer"></i>
                ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?
            </div>
            
            <div class="action-buttons">
                <div class="action-btn" id="linkAction" onclick="selectAction('link')">
                    <div class="action-icon">
                        <i class="fas fa-link"></i>
                    </div>
                    <div>
                        <div class="action-label">‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø</div>
                        <div class="action-description">‡¶Ö‡¶®‡ßá‡¶ï ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</div>
                    </div>
                </div>
                
                <div class="action-btn" id="bgRemoveAction" onclick="selectAction('bgremove')">
                    <div class="action-icon">
                        <i class="fas fa-magic"></i>
                    </div>
                    <div>
                        <div class="action-label">‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶∞‡¶æ‡¶®</div>
                        <div class="action-description">‡¶Ö‡¶®‡ßá‡¶ï ‡¶õ‡¶¨‡¶ø</div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Image Upload -->
            <div class="upload-section" id="uploadSection">
                <div class="section-title">
                    <i class="fas fa-images"></i>
                    ‡¶õ‡¶¨‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">
                        <h3> ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                        <p>‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶õ‡¶¨‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶°‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        <p>‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß®‡ß¶‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‚Ä¢ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡ßß‡ß¶MB ‚Ä¢ JPG, PNG, WEBP</p>
                    </div>
                    <input type="file" id="imageInput" accept="image/*" multiple>
                </div>

                <div class="selected-files" id="selectedFiles">
                    <div class="files-count">
                        <i class="fas fa-images"></i>
                        <span id="filesCount">‡ß¶‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</span>
                    </div>
                    <div class="files-grid" id="filesGrid"></div>
                </div>

                <!-- Background Options -->
                <div class="bg-color-options" id="bgColorOptions">
                    <div class="section-title">
                        <i class="fas fa-palette"></i>
                        ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡¶∂‡¶®
                    </div>
                    
                    <div class="bg-options-grid">
                        <div class="bg-option-btn" id="transparentBtn" onclick="selectBgOption('transparent')">
                            <div class="bg-option-icon">
                                <i class="fas fa-eraser"></i>
                            </div>
                            <div class="bg-option-name">‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°</div>
                            <div class="bg-option-desc">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶™‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü</div>
                        </div>
                        
                        <div class="bg-option-btn" id="whiteBtn" onclick="selectBgOption('white')">
                            <div class="bg-option-icon">
                                <i class="fas fa-square" style="color: #ffffff;"></i>
                            </div>
                            <div class="bg-option-name">‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°</div>
                            <div class="bg-option-desc">#FFFFFF</div>
                        </div>
                        
                        <div class="bg-option-btn" id="customBtn" onclick="selectBgOption('custom')">
                            <div class="bg-option-icon">
                                <i class="fas fa-eye-dropper"></i>
                            </div>
                            <div class="bg-option-name">‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞</div>
                            <div class="bg-option-desc">‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü</div>
                        </div>
                    </div>

                    <!-- Colour Picker -->
                    <div class="colour-picker-section" id="colourPickerSection">
                        <div class="section-title">
                            <i class="fas fa-paint-brush"></i>
                            ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                        </div>
                        
                        <div class="colour-display">
                            <div class="current-colour-box" id="currentColourBox" style="background-color: #4361ee;"></div>
                            <div class="colour-details">
                                <div class="colour-hex" id="colourHex">#4361EE</div>
                            </div>
                        </div>
                        
                        <input type="color" id="colourPicker" class="colour-picker-input" value="#4361ee">
                    </div>
                </div>

                <button class="process-btn" id="processBtn" onclick="startProcessing()" disabled>
                    <i class="fas fa-play"></i> ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>

            <!-- Step 3: Processing -->
            <div class="processing-container" id="processingContainer">
                <div class="processing-title" id="processingTitle">‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>

                <div class="progress-container">
                    <div class="progress-info">
                        <div class="progress-text" id="progressText">‡ß¶‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</div>
                        <div class="progress-percent" id="progressPercent">‡ß¶%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <div class="current-file" id="currentFile">
                    ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá: <span id="currentFileName">‡¶ï‡ßã‡¶®‡ßã ‡¶õ‡¶¨‡¶ø ‡¶®‡ßá‡¶á</span>
                </div>
            </div>

            <!-- Step 4: Results -->
            <div class="results-container" id="resultsContainer">
                <div class="results-header">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2 class="result-title" id="resultTitle">‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£!</h2>
                    <p class="result-subtitle" id="resultSubtitle">‡¶∏‡¶¨ ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</p>
                </div>

                <div class="summary-card">
                    <div class="summary-stats" id="summaryStats"></div>
                </div>

                <!-- Links Results -->
                <div class="links-container" id="linksContainer" style="display: none;">
                    <div class="links-header">
                        <div class="links-title">
                            <i class="fas fa-link"></i> ‡¶∏‡¶¨ ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï
                        </div>
                        <button class="copy-all-btn" onclick="copyAllLinks()">
                            <i class="fas fa-copy"></i> ‡¶∏‡¶¨ ‡¶ï‡¶™‡¶ø
                        </button>
                    </div>
                    <div class="links-list" id="linksList"></div>
                </div>

                <!-- Images Results -->
                <div class="images-container" id="imagesContainer" style="display: none;">
                    <div class="links-header">
                        <div class="links-title">
                            <i class="fas fa-image"></i> ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶õ‡¶¨‡¶ø
                        </div>
                    </div>
                    <div class="images-grid" id="imagesGrid"></div>
                </div>

                <button class="reset-btn" onclick="resetTool()">
                    <i class="fas fa-redo"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
        </div>

        <div class="footer">
            <p>¬© ‡ß®‡ß¶‡ß®‡ß´ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç | ‡ß®‡ß¶‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">‡¶∏‡¶´‡¶≤!</span>
    </div>

    <script>
        // API Keys
        const IMGBB_API_KEY = "c1f29465e1de3534d7069b0e1a663aee";
        const REMOVE_BG_API_KEY = "7ZzNjzXi6JhF69z6c3Qrj9tD";
        
        // DOM Elements
        const uploadSection = document.getElementById('uploadSection');
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');
        const selectedFiles = document.getElementById('selectedFiles');
        const filesCount = document.getElementById('filesCount');
        const filesGrid = document.getElementById('filesGrid');
        const processBtn = document.getElementById('processBtn');
        const bgColorOptions = document.getElementById('bgColorOptions');
        const transparentBtn = document.getElementById('transparentBtn');
        const whiteBtn = document.getElementById('whiteBtn');
        const customBtn = document.getElementById('customBtn');
        const colourPickerSection = document.getElementById('colourPickerSection');
        const colourPicker = document.getElementById('colourPicker');
        const currentColourBox = document.getElementById('currentColourBox');
        const colourHex = document.getElementById('colourHex');
        const processingContainer = document.getElementById('processingContainer');
        const processingTitle = document.getElementById('processingTitle');
        const progressText = document.getElementById('progressText');
        const progressPercent = document.getElementById('progressPercent');
        const progressFill = document.getElementById('progressFill');
        const currentFile = document.getElementById('currentFile');
        const currentFileName = document.getElementById('currentFileName');
        const resultsContainer = document.getElementById('resultsContainer');
        const resultTitle = document.getElementById('resultTitle');
        const resultSubtitle = document.getElementById('resultSubtitle');
        const summaryStats = document.getElementById('summaryStats');
        const linksContainer = document.getElementById('linksContainer');
        const linksList = document.getElementById('linksList');
        const imagesContainer = document.getElementById('imagesContainer');
        const imagesGrid = document.getElementById('imagesGrid');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        // State
        let selectedAction = null;
        let selectedFilesArray = [];
        let selectedBgOption = 'transparent';
        let selectedBgColor = null;
        const MAX_FILES = 20;
        let processedResults = [];
        
        // Initialize
        function initBackgroundOptions() {
            selectBgOption('transparent');
            
            colourPicker.addEventListener('input', function() {
                const hex = this.value.toUpperCase();
                currentColourBox.style.backgroundColor = hex;
                colourHex.textContent = hex;
                selectedBgColor = hex;
            });
        }
        
        // Select background option
        function selectBgOption(option) {
            selectedBgOption = option;
            
            transparentBtn.classList.remove('active');
            whiteBtn.classList.remove('active');
            customBtn.classList.remove('active');
            
            if (option === 'transparent') {
                transparentBtn.classList.add('active');
                colourPickerSection.style.display = 'none';
                selectedBgColor = null;
                showNotification('‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'info');
            } else if (option === 'white') {
                whiteBtn.classList.add('active');
                colourPickerSection.style.display = 'none';
                selectedBgColor = '#FFFFFF';
                showNotification('‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'info');
            } else if (option === 'custom') {
                customBtn.classList.add('active');
                colourPickerSection.style.display = 'block';
                selectedBgColor = '#4361EE';
                colourPicker.value = '#4361ee';
                currentColourBox.style.backgroundColor = '#4361EE';
                colourHex.textContent = '#4361EE';
                showNotification('‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'info');
            }
        }
        
        // Action Selection
        function selectAction(action) {
            if (selectedAction === action) return;
            
            selectedAction = action;
            
            document.getElementById('linkAction').classList.remove('active');
            document.getElementById('bgRemoveAction').classList.remove('active');
            
            if (action === 'link') {
                document.getElementById('linkAction').classList.add('active');
                bgColorOptions.style.display = 'none';
                showNotification('‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'info');
            } else if (action === 'bgremove') {
                document.getElementById('bgRemoveAction').classList.add('active');
                bgColorOptions.style.display = 'block';
                initBackgroundOptions();
                showNotification('‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'info');
            }
            
            setTimeout(() => {
                uploadSection.style.display = 'block';
                uploadSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);
        }
        
        // File Upload
        uploadArea.addEventListener('click', () => imageInput.click());
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.background = 'rgba(67, 97, 238, 0.1)';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.background = '';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.background = '';
            
            if (e.dataTransfer.files.length) {
                handleFiles(e.dataTransfer.files);
            }
        });
        
        imageInput.addEventListener('change', () => {
            if (imageInput.files.length) {
                handleFiles(imageInput.files);
            }
        });
        
        function handleFiles(files) {
            const newFiles = Array.from(files).slice(0, MAX_FILES - selectedFilesArray.length);
            
            if (newFiles.length === 0) {
                showNotification(`‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ${MAX_FILES}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®`, 'error');
                return;
            }
            
            let validFiles = 0;
            
            newFiles.forEach(file => {
                if (!file.type.match('image.*')) {
                    showNotification(`${file.name} ‡¶õ‡¶¨‡¶ø ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶Ø‡¶º`, 'error');
                    return;
                }
                
                if (file.size > 10 * 1024 * 1024) {
                    showNotification(`${file.name} ‡ßß‡ß¶MB ‡¶è‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø`, 'error');
                    return;
                }
                
                if (selectedFilesArray.some(f => f.name === file.name && f.size === file.size)) {
                    showNotification(`${file.name} ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶õ‡ßá`, 'warning');
                    return;
                }
                
                selectedFilesArray.push({
                    file: file,
                    id: Date.now() + Math.random(),
                    preview: null
                });
                validFiles++;
            });
            
            if (validFiles > 0) {
                updateFilesDisplay();
                processBtn.disabled = false;
                showNotification(`${validFiles}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
            }
        }
        
        function updateFilesDisplay() {
            filesCount.textContent = `${selectedFilesArray.length}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`;
            
            if (selectedFilesArray.length > 0) {
                selectedFiles.style.display = 'block';
                filesGrid.innerHTML = '';
                
                selectedFilesArray.forEach((fileObj, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        fileObj.preview = e.target.result;
                        
                        const fileItem = document.createElement('div');
                        fileItem.className = 'file-item';
                        fileItem.innerHTML = `
                            <img class="file-preview" src="${e.target.result}" alt="${fileObj.file.name}">
                            <div class="file-info">
                                <div class="file-name">${fileObj.file.name}</div>
                                <div class="file-size">${formatFileSize(fileObj.file.size)}</div>
                            </div>
                            <div class="remove-file" onclick="removeFile(${index})">
                                <i class="fas fa-times"></i>
                            </div>
                        `;
                        filesGrid.appendChild(fileItem);
                    };
                    reader.readAsDataURL(fileObj.file);
                });
            } else {
                selectedFiles.style.display = 'none';
                processBtn.disabled = true;
            }
        }
        
        function removeFile(index) {
            selectedFilesArray.splice(index, 1);
            updateFilesDisplay();
            showNotification('‡¶õ‡¶¨‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'info');
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' ‡¶¨‡¶æ‡¶á‡¶ü';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / 1048576).toFixed(1) + ' MB';
        }
        
        // Start Processing
        function startProcessing() {
            if (!selectedAction || selectedFilesArray.length === 0) {
                showNotification('‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶è‡¶¨‡¶Ç ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }
            
            uploadSection.style.display = 'none';
            processingContainer.style.display = 'block';
            
            if (selectedAction === 'link') {
                processMultipleLinks();
            } else if (selectedAction === 'bgremove') {
                processMultipleBackgroundRemovals();
            }
            
            processingContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // Processing Functions
        async function processMultipleLinks() {
            processingTitle.textContent = '‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            processedResults = [];
            let completed = 0;
            let successful = 0;
            
            for (let i = 0; i < selectedFilesArray.length; i++) {
                const fileObj = selectedFilesArray[i];
                
                currentFileName.textContent = fileObj.file.name;
                
                try {
                    const formData = new FormData();
                    formData.append("image", fileObj.file);
                    
                    const response = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
                        method: "POST",
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        processedResults.push({
                            name: fileObj.file.name,
                            type: 'link',
                            url: data.data.url,
                            preview: fileObj.preview,
                            size: fileObj.file.size
                        });
                        successful++;
                    }
                    
                } catch (error) {
                    console.error('Error:', error);
                }
                
                completed++;
                
                const percent = Math.round((completed / selectedFilesArray.length) * 100);
                progressText.textContent = `${completed}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`;
                progressPercent.textContent = `${percent}%`;
                progressFill.style.width = `${percent}%`;
            }
            
            showLinksResults(successful);
        }
        
        async function processMultipleBackgroundRemovals() {
            processingTitle.textContent = '‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            processedResults = [];
            let completed = 0;
            let successful = 0;
            
            for (let i = 0; i < selectedFilesArray.length; i++) {
                const fileObj = selectedFilesArray[i];
                
                currentFileName.textContent = fileObj.file.name;
                
                try {
                    const formData = new FormData();
                    formData.append('image_file', fileObj.file);
                    formData.append('size', 'auto');
                    formData.append('format', 'png');
                    
                    const response = await fetch('https://api.remove.bg/v1.0/removebg', {
                        method: 'POST',
                        headers: {
                            'X-Api-Key': REMOVE_BG_API_KEY
                        },
                        body: formData
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = URL.createObjectURL(blob);
                        
                        let processedImageUrl = url;
                        
                        if (selectedBgOption !== 'transparent') {
                            processedImageUrl = await applyBackgroundColor(blob, selectedBgColor);
                        }
                        
                        processedResults.push({
                            name: fileObj.file.name,
                            type: 'image',
                            url: processedImageUrl,
                            blob: blob,
                            preview: fileObj.preview,
                            originalUrl: url,
                            bgColor: selectedBgColor,
                            bgOption: selectedBgOption,
                            isTransparent: selectedBgOption === 'transparent'
                        });
                        successful++;
                    }
                    
                } catch (error) {
                    console.error('Error:', error);
                }
                
                completed++;
                
                const percent = Math.round((completed / selectedFilesArray.length) * 100);
                progressText.textContent = `${completed}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`;
                progressPercent.textContent = `${percent}%`;
                progressFill.style.width = `${percent}%`;
            }
            
            showImagesResults(successful);
        }
        
        // Apply background color to transparent image
        async function applyBackgroundColor(blob, bgColor) {
            return new Promise((resolve) => {
                const img = new Image();
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    ctx.fillStyle = bgColor;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    ctx.drawImage(img, 0, 0);
                    
                    const dataUrl = canvas.toDataURL('image/png');
                    resolve(dataUrl);
                };
                
                img.src = URL.createObjectURL(blob);
            });
        }
        
        // Show Results
        function showLinksResults(successful) {
            processingContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
            
            resultTitle.textContent = '‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£!';
            resultSubtitle.textContent = `${successful}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`;
            
            summaryStats.innerHTML = `
                <div class="stat-item">
                    <div class="stat-number">${selectedFilesArray.length}</div>
                    <div class="stat-label">‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">${successful}</div>
                    <div class="stat-label">‡¶∏‡¶´‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">${selectedFilesArray.length - successful}</div>
                    <div class="stat-label">‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•</div>
                </div>
            `;
            
            linksContainer.style.display = 'block';
            imagesContainer.style.display = 'none';
            
            linksList.innerHTML = '';
            processedResults.forEach((result, index) => {
                const linkItem = document.createElement('div');
                linkItem.className = 'link-item';
                linkItem.innerHTML = `
                    <div class="link-header">
                        <div class="link-number">${index + 1}</div>
                        <img class="link-preview-img" src="${result.preview}" alt="${result.name}" 
                             onclick="window.open('${result.url}', '_blank')" style="cursor: pointer;">
                        <div class="link-filename">${result.name}</div>
                    </div>
                    <div class="link-box">${result.url}</div>
                    <div class="link-actions">
                        <button class="link-action-btn copy-link-btn" onclick="copyLink('${result.url}')">
                            <i class="fas fa-copy"></i> ‡¶ï‡¶™‡¶ø
                        </button>
                    </div>
                `;
                linksList.appendChild(linkItem);
            });
            
            resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            showNotification(`${successful}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶∏‡¶´‡¶≤!`, 'success');
        }
        
        function showImagesResults(successful) {
            processingContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
            
            resultTitle.textContent = '‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£!';
            
            let bgInfo = '';
            if (selectedBgOption === 'transparent') {
                bgInfo = '‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°';
            } else if (selectedBgOption === 'white') {
                bgInfo = '‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°';
            } else {
                bgInfo = '‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞';
            }
            
            resultSubtitle.textContent = `${successful}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`;
            
            summaryStats.innerHTML = `
                <div class="stat-item">
                    <div class="stat-number">${selectedFilesArray.length}</div>
                    <div class="stat-label">‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">${successful}</div>
                    <div class="stat-label">‡¶∏‡¶´‡¶≤ ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">${selectedFilesArray.length - successful}</div>
                    <div class="stat-label">‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•</div>
                </div>
            `;
            
            linksContainer.style.display = 'none';
            imagesContainer.style.display = 'block';
            
            imagesGrid.innerHTML = '';
            processedResults.forEach((result, index) => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                
                imageItem.innerHTML = `
                    <img class="image-preview" src="${result.url}" alt="${result.name}">
                    <div class="image-info">
                        <div class="image-name">${result.name}</div>
                        <div class="image-actions">
                            <button class="image-action-btn download-image-btn" onclick="downloadImage(${index})">
                                <i class="fas fa-download"></i> ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°
                            </button>
                        </div>
                    </div>
                `;
                imagesGrid.appendChild(imageItem);
            });
            
            resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            showNotification(`${successful}‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶∏‡¶´‡¶≤!`, 'success');
        }
        
        // Result Actions
        function copyLink(link) {
            navigator.clipboard.writeText(link).then(() => {
                showNotification('‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
            }).catch(err => {
                showNotification('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø', 'error');
            });
        }
        
        function copyAllLinks() {
            let allLinks = '';
            processedResults.forEach((result, index) => {
                allLinks += `${index + 1}. ${result.name}\n${result.url}\n\n`;
            });
            
            navigator.clipboard.writeText(allLinks).then(() => {
                showNotification(' ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
            }).catch(err => {
                showNotification('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø', 'error');
            });
        }
        
        function downloadImage(index) {
            const result = processedResults[index];
            if (!result.blob) return;
            
            const link = document.createElement('a');
            link.href = result.url;
            
            let filename = `bg-removed-${result.name.split('.')[0]}.png`;
            if (result.isTransparent) {
                filename = `transparent-${result.name.split('.')[0]}.png`;
            }
            
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('‡¶õ‡¶¨‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
        }
        
        function resetTool() {
            selectedAction = null;
            selectedFilesArray = [];
            selectedBgOption = 'transparent';
            selectedBgColor = null;
            processedResults = [];
            
            document.getElementById('linkAction').classList.remove('active');
            document.getElementById('bgRemoveAction').classList.remove('active');
            
            uploadSection.style.display = 'none';
            selectedFiles.style.display = 'none';
            bgColorOptions.style.display = 'none';
            processingContainer.style.display = 'none';
            resultsContainer.style.display = 'none';
            
            processBtn.disabled = true;
            progressFill.style.width = '0%';
            progressPercent.textContent = '0%';
            imageInput.value = '';
            
            transparentBtn.classList.remove('active');
            whiteBtn.classList.remove('active');
            customBtn.classList.remove('active');
            transparentBtn.classList.add('active');
            colourPickerSection.style.display = 'none';
            
            colourPicker.value = '#4361ee';
            
            processedResults.forEach(result => {
                if (result.type === 'image' && result.url) {
                    URL.revokeObjectURL(result.url);
                }
                if (result.originalUrl) {
                    URL.revokeObjectURL(result.originalUrl);
                }
            });
            
            showNotification('‡¶®‡¶§‡ßÅ‡¶® ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§', 'info');
        }
        
        // Notification
        function showNotification(message, type) {
            let icon = 'fas fa-check-circle';
            if (type === 'error') icon = 'fas fa-exclamation-circle';
            if (type === 'warning') icon = 'fas fa-exclamation-triangle';
            if (type === 'info') icon = 'fas fa-info-circle';
            
            notification.innerHTML = `<i class="${icon}"></i><span>${message}</span>`;
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Initialize
        window.addEventListener('load', () => {
            showNotification('‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç ‡¶ü‡ßÅ‡¶≤‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ', 'info');
        });
    </script>
</body>
</html>
